#to save a disk image
dd if=/dev/hda of=teh_entire_disk.img

#to copy over an entire partition (e.g. copy to a new hd)
#need to re-set up the bootloader. boot in with a boot disk (knoppix), chroot, install grub
cp -dfxpRv

#to record off the radio
rec -c 2 -r 22050 -s w test.wav

#to strip out the rythmbox filenames
#cat Exercise.m3u |  grep "^File" |  sed -e "s/File[0-9]*=\(.*\)/\1/" |  perl -e 'print map {$_->[1]} sort {$a->[0]<=>$b->[0]} map {[rand,$_]} <>' |  sed -e "s/\//\\\//" | sed -e "s/ /\\ /" | sed -e "s/^/cp /" |  sed -e "s/\n/ \/media\/usbdisk\//" > Playlist.m3u
cat Exercise.m3u |  grep "^File" |  sed -e "s/File[0-9]*=\(.*\)/\1/" |  perl -e 'print map {$_->[1]} sort {$a->[0]<=>$b->[0]} map {[rand,$_]} <>' | sed -e "s/ /\\ /g" -e "s/(/\\(/g" -e "s/)/\\)/g" -e "s/'/\\'/g" | sed -e "s/^/cp /" |  sed -e 's/$/ \/media\/usbdisk\//' | grep -v .ogg > Playlist.m3u
cat Exercise.m3u |  grep "^File" |  sed -e "s/File[0-9]*=\(.*\)/\1/" |  perl -e 'print map {$_->[1]} sort {$a->[0]<=>$b->[0]} map {[rand,$_]} <>' | sed -e "s/ /\\ /g" -e "s/(/\\(/g" -e "s/)/\\)/g" -e "s/'/\\'/g" | grep -v .ogg > Playlist3.m3u

#transform text files to move files
%s/\([ ()']\)/\\\1/g
%s/^\(.*\)$/mv \1 \1/g

#to list all installed packages (grep them)
dpkg --get-selections
#or
dpkg -l regex

#to remove configuration files
apt-get remove --purge 

#to install grub in mbr from knoppix
mount the root directory (/dev/sda6 in this case)
sudo grub-install --root-directory=/media/XXX-XXX-XXX /dev/sda --recheck

#print double sided (duplex)
mpage -1 -t -Php4-2 filename
pdf2ps filename | mpage -1 -t -Php4-2

#split oggs
mp3splt -t 5.0 -o "name-@n" name.ogg

#java profiling
java -Xrunhprof:file=output.txt,cpu=samples Simulator -numNodes 100 -architecture DHT

#compile with debugging symbols
./configure CPPFLAGS=-DDEBUG
./configure CPPFLAGS=-DDEBUG=1

#burn iso's
cdrecord -driveropts=burnfree -v -dev /dev/hdc ubuntu-6.06-desktop-i386.iso; eject /dev/cdrom

#to ssh without a passwd
#generate the  passwords on the client
ssh-keygen -t dsa
#copy the public key to the server
scp id_dsa.pub hostname:/home/webbsd
#connect to the host
ssh hostname
#add it to the authorized file
cat ~/id_dsa.pub ~/.ssh/authorized_keys

#recursive sed (replace all instances of 4 spaces with a tab
find . -name "*.java" -exec sed -i -e 's/    /\t/g' {} \;

#sync home area to three
rsync -a ~ three:/home

#sync home area to one
rsync -a ~ one:/home/webbsd

#vnc
vncviwerer -via IP grannys:0

#make a package downloaded via apt
dpkg-buildpackage -rfakeroot -uc -b

#rip and convert a real-player stream using mplayer
mplayer -dumpstream "rtsp://XXX.rm" -dumpfile filename.rm
mplayer -vo null -vc dummy -ao pcm:waveheader:file=XXX.wav XXX.rm

#converts an eps figure to a png
convert -density 300 srs-1.eps -flatten srs-1.png
convert -density 300 -rotate 90 srs-1.eps -flatten srs-1.png
convert -density 300 inconsistency1.svg -flatten -trim inconsistency1.png

#using apt-get for source packages
#download
apt-get source packagename
#from inside the package directory, build it with:
dpkg-buildpackage -rfakeroot -uc -b
#to install the dependencies for building a package
apt-get build-dep packagename

#svn create a repository (usually on hammer)
svnadmin create --fs-type fsfs /home/user/svn
#initial import
svn import /path/to/project/ file:///home/user/svn/project/trunk -m 'Initial import'
#checkout copy
svn checkout file:///home/user/svn/project
svn checkout svn+ssh://hammer/usr/student/tango/webbsd/svn/project
#which files are new or have been modified
svn status
#add 'file' to the respository
svn add file
#commit changes to the repository (do an update first)
svn update
svn commit -m "message"
#ignore files in the project directory. Can use * as a wild card.
svn propedit svn:ignore ./some_path
#print out the contents of a repository (from withing hammer:~/svn)
svnlook tree .
#Set up the permissions for a svn repository. Assume svn_grp exists and the user is a member.
chgrp svn_grp -R repository
find repository -type d -exec chmod g+rws {} \;
find repository -type f -perm 600 -exec chmod 660 {} \;
find repository -type f -perm 400 -exec chmod 440 {} \;
#to check out an old version
svn update -r <rev> <file>

#to rename upper case to lower case
rename 'y/A-Z/a-z/' *

#backup laptop to external hd
rsync -a /home/webbsd /media/disk/Backup/home/
rsync -a /volatile/webbsd /media/disk/Backup/volatile/
